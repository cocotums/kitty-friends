(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{105:function(e,t,a){},190:function(e,t,a){e.exports=a(354)},195:function(e,t,a){},217:function(e,t){},221:function(e,t){},223:function(e,t){},260:function(e,t){},261:function(e,t){},342:function(e,t){},345:function(e,t,a){},354:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(30),l=a.n(c),o=(a(105),a(195),a(13)),i=a(14),s=a(15),u=a(16),m=a(17),h=a(8),d=a(23),g=a.n(d),p=a(361),E=a(360);var f=function(e){var t=e.user,a=e.logout;return r.a.createElement(p.a,{bg:"dark",expand:"lg",variant:"dark"},r.a.createElement(p.a.Brand,{href:"/"},"Kitty Friends"),r.a.createElement(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(p.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(E.a,{className:"mr-auto"},r.a.createElement(m.b,{className:"nav-link",to:"/"},"Home"),r.a.createElement(m.b,{className:"nav-link",to:"/cat/add"},"Add Cat"),r.a.createElement(m.b,{className:"nav-link",to:"/chat"},"Chat")),r.a.createElement(E.a,null,t?r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a.Link,{href:"#user"},t.username),r.a.createElement(m.b,{to:"/logout",className:"nav-link",onClick:a},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,{to:"/login",className:"nav-link"},"Login"),r.a.createElement(m.b,{to:"/register",className:"nav-link"},"Register")))))},v=a(356),b=a(357),C=a(182),j=a(363),y="http://localhost:2626/api",k=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={cats:[]},e.fetchCats=function(){g.a.get("".concat(y,"/cats")).then((function(t){e.setState({cats:t.data.cats}),console.log(t.data)})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.fetchCats()}},{key:"render",value:function(){return console.log(this.state.cats),r.a.createElement("div",null,r.a.createElement("h1",null,"Home"),r.a.createElement("div",{className:"bodymovin","data-icon":"https://maxst.icons8.com/vue-static/landings/animated-icons/icons/maneki/maneki.json"}),r.a.createElement(v.a,null,r.a.createElement(b.a,null,this.state.cats.map((function(e){return r.a.createElement(C.a,{key:e._id,md:"4"},r.a.createElement(j.a,null,r.a.createElement(j.a.Body,null,r.a.createElement(j.a.Img,{variant:"top",src:e.picture}),r.a.createElement("div",null,r.a.createElement(m.b,{to:"/cat/".concat(e._id)},e.name)))))})))))}}]),a}(n.Component),O=a(32),H=a(359),S=a(358),w=(a(217),function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",description:"",picture:"",status:!1},e.changeHandler=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.submitHandler=function(){console.log(e.state),g.a.post("".concat("http://localhost:2626/api","/cats"),e.state).then((function(t){console.log("done"),e.setState({status:!0})})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.description,n=e.picture;return e.status?r.a.createElement(h.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement("h1",null,"Add Cat"),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"name",value:t,onChange:this.changeHandler,placeholder:"name"})),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"description",value:a,onChange:this.changeHandler,placeholder:"description"})),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"picture",value:n,onChange:this.changeHandler,placeholder:"picture URL"})),r.a.createElement(S.a,{onClick:this.submitHandler},"Submit")))}}]),a}(n.Component)),A=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",name:"",username:"",mobileNumber:"",registerSuccess:!1},e.changeHandler=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.registerHandler=function(){e.props.register(e.state)},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Register"),r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"name",type:"text",onChange:this.changeHandler,placeholder:"name"})),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"email",type:"email",onChange:this.changeHandler,placeholder:"email"})),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"mobileNumber",type:"number",onChange:this.changeHandler,placeholder:"mobile number"})),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"username",type:"text",onChange:this.changeHandler,placeholder:"username"})),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"password",type:"password",onChange:this.changeHandler,placeholder:"password"})),r.a.createElement(S.a,{variant:"primary",block:!0,onClick:this.registerHandler}," ","Login"))))}}]),a}(n.Component),N=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e.changeHandler=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.loginHandler=function(){e.props.login(e.state)},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"username",type:"text",onChange:this.changeHandler})),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"password",type:"password",onChange:this.changeHandler})),r.a.createElement(S.a,{variant:"primary",block:!0,onClick:this.loginHandler}," ","Login"," "))))}}]),a}(n.Component),x=a(183),I=a(184);var M=function(e){var t=e.component,a=e.isAuth,n=Object(I.a)(e,["component","isAuth"]);return r.a.createElement(h.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(h.a,{to:"/login"})}}))},L=a(362),R=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:e.props.cat.name,picture:e.props.cat.picture,description:e.props.cat.description},e.changeHandler=function(t){console.log("I am editing the: ",t.target.name),e.setState(Object(O.a)({},t.target.name,t.target.value))},e.submitHandler=function(){e.props.editItem(e.state,e.props.cat._id)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.picture,n=e.description;return r.a.createElement("div",null,r.a.createElement("h1",null,"Edit Cat"),r.a.createElement("div",null,r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"name",value:t,onChange:this.changeHandler})),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"picture",value:a,onChange:this.changeHandler})),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"description",value:n,onChange:this.changeHandler})),r.a.createElement(S.a,{onClick:this.submitHandler},"Submit")))}}]),a}(n.Component),B="http://localhost:2626/api",D=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={cat:null,edit:!1,deleteCat:!1},e.showEdit=function(){e.setState((function(e){return{edit:!e.edit}}))},e.editCats=function(t,a){g.a.put("".concat(B,"/cats/").concat(a),t).then((function(t){e.getCat()})).catch((function(e){console.log(e)}))},e.removeCat=function(){g.a.delete("".concat(B,"/cats/").concat(e.props.match.params.id)).then((function(t){e.setState({deleteCat:!0})})).catch((function(e){console.log(e)}))},e.getCat=function(){g.a.get("".concat(B,"/cats/").concat(e.props.match.params.id)).then((function(t){e.setState({cat:t.data.cat})})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getCat()}},{key:"render",value:function(){var e=this.state,t=e.cat,a=e.edit;return e.deleteCat?r.a.createElement(h.a,{to:"/"}):r.a.createElement(v.a,null,r.a.createElement("h1",null,"Single Cat"),t?r.a.createElement("div",null,t.name,r.a.createElement("div",null,t.description," "),r.a.createElement("div",null,r.a.createElement("img",{src:t.picture,width:"400"})," "),r.a.createElement(S.a,{onClick:this.showEdit},"Update Cat"),a&&r.a.createElement(R,{cat:t,editCat:this.editCats}),r.a.createElement(S.a,{variant:"danger",onClick:this.removeCat},"Remove cat")):"ho liao buey!")}}]),a}(n.Component),U=a(189),_=a(53),P=a(186),F=a.n(P),J=(a(345),a(187)),K=a(188),T=a.n(K),W=function(e){var t=Object(n.useState)(),a=Object(_.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)([]),i=Object(_.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)(""),h=Object(_.a)(m,2),d=h[0],g=h[1],p=Object(n.useState)(null),E=Object(_.a)(p,2),f=(E[0],E[1]);Object(n.useEffect)((function(){l(e.user)}),[e.user]);var v=Object(n.useRef)();function b(e){e.preventDefault();var t=c._id,a=c.username,n={body:d,id:t,name:a};g(""),v.current.emit("send message",n)}return Object(n.useEffect)((function(){v.current=F.a.connect("http://localhost:2626"),v.current.on("chat message",(function(e){!function(e){u((function(t){return[].concat(Object(U.a)(t),[e])}))}(e),J.animateScroll.scrollToBottom({containerId:"chatbox"})}))}),[]),r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"container",id:"chatbox"},s&&s.map((function(e,t){return e.message.id===c._id?r.a.createElement("div",{className:"myRow",key:t},r.a.createElement("div",{className:"myMessage"},e.message.name," : ",e.message.body)):r.a.createElement("div",{className:"partnerRow",key:t},r.a.createElement("div",{className:"partnerMessage"},e.message.name," : ",e.message.body))}))),r.a.createElement("div",{className:"container-input"},r.a.createElement("form",{className:"form",onSubmit:b},r.a.createElement("textarea",{className:"textbox",value:d,onChange:function(e){"Enter"!==e.key&&g(e.target.value)},placeholder:"Say something...",onKeyPress:function(e){"Enter"===e.key&&b(e)}}),r.a.createElement(T.a,{onEmojiClick:function(e,t){f(t.emoji),g(t.emoji),console.log(t.emoji)}}),r.a.createElement("button",{className:"button"},"Send"))))},$="http://localhost:2626/api",q=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={cats:[],errorMessage:null,isAuth:!1,user:null},e.logoutHandler=function(t){t.preventDefault(),console.log("i logged out"),e.setState({items:[],errorMessage:null,isAuth:!1,user:null}),localStorage.removeItem("token")},e.getUserProfile=function(t){g.a.get("".concat($,"/auth/user"),{headers:{"x-auth-token":t}}).then((function(t){console.log(t.data),e.setState({isAuth:!0,user:t.data.user})})).catch((function(e){}))},e.loginHandler=function(t){g.a.post("".concat($,"/auth/login"),t).then((function(t){console.log(t.data),localStorage.setItem("token",t.data.token),e.getUserProfile(t.data.token),e.setState({isAuth:!0})})).catch((function(t){e.setState({isAuth:!1,errorMessage:t.response.data.message})}))},e.registerHandler=function(t){g.a.post("".concat($,"/auth/register"),t).then((function(t){console.log(t.data),localStorage.setItem("token",t.data.token),e.setState({isAuth:!0})})).catch((function(t){e.setState({isAuth:!1})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");null!=e&&(Object(x.decode)(e)?this.getUserProfile(e):localStorage.removeItem("token"))}},{key:"render",value:function(){var e=this;console.log($);var t=this.state,a=t.isAuth,n=t.user,c=t.errorMessage;return r.a.createElement(m.a,null,r.a.createElement(f,{user:n,logout:this.logoutHandler}),c&&r.a.createElement(L.a,null,c),r.a.createElement(h.d,null,r.a.createElement(M,{exact:!0,path:"/",isAuth:a,component:k}),r.a.createElement(h.b,{path:"/cat/add",exact:!0,render:function(){return r.a.createElement(w,null)}}),r.a.createElement(M,{exact:!0,path:"/cat/:id",isAuth:a,component:D}),r.a.createElement(h.b,{path:"/register",exact:!0,render:function(){return a?r.a.createElement(h.a,{to:"/"}):r.a.createElement(A,{register:e.registerHandler})}}),r.a.createElement(h.b,{path:"/login",exact:!0,render:function(){return a?r.a.createElement(h.a,{to:"/"}):r.a.createElement(N,{login:e.loginHandler})}}),r.a.createElement(h.b,{path:"/chat",exact:!0,render:function(){return r.a.createElement(W,{user:e.state.user})}})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(353);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[190,1,2]]]);
//# sourceMappingURL=main.31ac9f05.chunk.js.map