(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{105:function(e,t,a){},189:function(e,t,a){e.exports=a(353)},194:function(e,t,a){},216:function(e,t){},220:function(e,t){},222:function(e,t){},259:function(e,t){},260:function(e,t){},341:function(e,t){},344:function(e,t,a){},353:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(30),l=a.n(c),o=(a(105),a(194),a(13)),i=a(14),s=a(15),u=a(16),m=a(17),d=a(8),h=a(22),g=a.n(h),p=a(360),E=a(359);var f=function(e){var t=e.user,a=e.logout;return r.a.createElement(p.a,{bg:"dark",expand:"lg",variant:"dark"},r.a.createElement(p.a.Brand,{href:"/"},"Kitty Friends"),r.a.createElement(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(p.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(E.a,{className:"mr-auto"},r.a.createElement(m.b,{className:"nav-link",to:"/"},"Home"),r.a.createElement(m.b,{className:"nav-link",to:"/cat/add"},"Add Cat"),r.a.createElement(m.b,{className:"nav-link",to:"/chat"},"Chat")),r.a.createElement(E.a,null,t?r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a.Link,{href:"#user"},t.username),r.a.createElement(m.b,{to:"/logout",className:"nav-link",onClick:a},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,{to:"/login",className:"nav-link"},"Login"),r.a.createElement(m.b,{to:"/register",className:"nav-link"},"Register")))))},v=a(355),b=a(356),C=a(182),k=a(362),y="https://kitty-friends-project-4.herokuapp.com/api",j=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={cats:[]},e.fetchCats=function(){g.a.get("".concat(y,"/cats")).then((function(t){e.setState({cats:t.data.cats}),console.log(t.data)})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.fetchCats()}},{key:"render",value:function(){return console.log(this.state.cats),r.a.createElement("div",null,r.a.createElement("h1",null,"Home"),r.a.createElement("div",{className:"bodymovin","data-icon":"https://maxst.icons8.com/vue-static/landings/animated-icons/icons/maneki/maneki.json"}),r.a.createElement(v.a,null,r.a.createElement(b.a,null,this.state.cats.map((function(e){return r.a.createElement(C.a,{key:e._id,md:"4"},r.a.createElement(k.a,null,r.a.createElement(k.a.Body,null,r.a.createElement(k.a.Img,{variant:"top",src:e.picture}),r.a.createElement("div",null,r.a.createElement(m.b,{to:"/cat/".concat(e._id)},e.name)))))})))))}}]),a}(n.Component),O=a(32),H=a(358),S=a(357),w=(a(216),"https://kitty-friends-project-4.herokuapp.com/api"),A=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",description:"",picture:"",status:!1},e.changeHandler=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.submitHandler=function(){console.log(e.state),g.a.post("".concat(w,"/cats"),e.state).then((function(t){console.log("done"),e.setState({status:!0})})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.description,n=e.picture;return e.status?r.a.createElement(d.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement("h1",null,"Add Cat"),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"name",value:t,onChange:this.changeHandler,placeholder:"name"})),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"description",value:a,onChange:this.changeHandler,placeholder:"description"})),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"picture",value:n,onChange:this.changeHandler,placeholder:"picture URL"})),r.a.createElement(S.a,{onClick:this.submitHandler},"Submit")))}}]),a}(n.Component),N=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",name:"",username:"",mobileNumber:"",registerSuccess:!1},e.changeHandler=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.registerHandler=function(){e.props.register(e.state)},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Register"),r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"name",type:"text",onChange:this.changeHandler,placeholder:"name"})),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"email",type:"email",onChange:this.changeHandler,placeholder:"email"})),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"mobileNumber",type:"number",onChange:this.changeHandler,placeholder:"mobile number"})),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"username",type:"text",onChange:this.changeHandler,placeholder:"username"})),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"password",type:"password",onChange:this.changeHandler,placeholder:"password"})),r.a.createElement(S.a,{variant:"primary",block:!0,onClick:this.registerHandler}," ","Login"))))}}]),a}(n.Component),x=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e.changeHandler=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.loginHandler=function(){e.props.login(e.state)},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"username",type:"text",onChange:this.changeHandler})),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"password",type:"password",onChange:this.changeHandler})),r.a.createElement(S.a,{variant:"primary",block:!0,onClick:this.loginHandler}," ","Login"," "))))}}]),a}(n.Component),I=a(183),M=a(184);var L=function(e){var t=e.component,a=e.isAuth,n=Object(M.a)(e,["component","isAuth"]);return r.a.createElement(d.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(d.a,{to:"/login"})}}))},R=a(361),B=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:e.props.cat.name,picture:e.props.cat.picture,description:e.props.cat.description},e.changeHandler=function(t){console.log("I am editing the: ",t.target.name),e.setState(Object(O.a)({},t.target.name,t.target.value))},e.submitHandler=function(){e.props.editItem(e.state,e.props.cat._id)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.picture,n=e.description;return r.a.createElement("div",null,r.a.createElement("h1",null,"Edit Cat"),r.a.createElement("div",null,r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"name",value:t,onChange:this.changeHandler})),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"picture",value:a,onChange:this.changeHandler})),r.a.createElement(b.a,null,r.a.createElement(H.a.Control,{name:"description",value:n,onChange:this.changeHandler})),r.a.createElement(S.a,{onClick:this.submitHandler},"Submit")))}}]),a}(n.Component),D="https://kitty-friends-project-4.herokuapp.com/api",U=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={cat:null,edit:!1,deleteCat:!1},e.showEdit=function(){e.setState((function(e){return{edit:!e.edit}}))},e.editCats=function(t,a){g.a.put("".concat(D,"/cats/").concat(a),t).then((function(t){e.getCat()})).catch((function(e){console.log(e)}))},e.removeCat=function(){g.a.delete("".concat(D,"/cats/").concat(e.props.match.params.id)).then((function(t){e.setState({deleteCat:!0})})).catch((function(e){console.log(e)}))},e.getCat=function(){g.a.get("".concat(D,"/cats/").concat(e.props.match.params.id)).then((function(t){e.setState({cat:t.data.cat})})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getCat()}},{key:"render",value:function(){var e=this.state,t=e.cat,a=e.edit;return e.deleteCat?r.a.createElement(d.a,{to:"/"}):r.a.createElement(v.a,null,r.a.createElement("h1",null,"Single Cat"),t?r.a.createElement("div",null,t.name,r.a.createElement("div",null,t.description," "),r.a.createElement("div",null,r.a.createElement("img",{src:t.picture,width:"400"})," "),r.a.createElement(S.a,{onClick:this.showEdit},"Update Cat"),a&&r.a.createElement(B,{cat:t,editCat:this.editCats}),r.a.createElement(S.a,{variant:"danger",onClick:this.removeCat},"Remove cat")):"ho liao buey!")}}]),a}(n.Component),_=a(188),P=a(69),F=a(186),J=a.n(F),K=(a(344),a(187)),T=function(e){var t=Object(n.useState)(),a=Object(P.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)([]),i=Object(P.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)(""),d=Object(P.a)(m,2),h=d[0],g=d[1];Object(n.useEffect)((function(){l(e.user)}),[e.user]);var p=Object(n.useRef)();function E(e){e.preventDefault();var t=c._id,a=c.username,n={body:h,id:t,name:a};g(""),p.current.emit("send message",n)}return Object(n.useEffect)((function(){p.current=J.a.connect("https://kitty-friends-project-4.herokuapp.com/"),p.current.on("chat message",(function(e){!function(e){u((function(t){return[].concat(Object(_.a)(t),[e])}))}(e),K.animateScroll.scrollToBottom({containerId:"chatbox"})}))}),[]),r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"container",id:"chatbox"},s&&s.map((function(e,t){return e.message.id===c._id?r.a.createElement("div",{className:"myRow",key:t},r.a.createElement("div",{className:"myMessage"},e.message.name," : ",e.message.body)):r.a.createElement("div",{className:"partnerRow",key:t},r.a.createElement("div",{className:"partnerMessage"},e.message.name," : ",e.message.body))}))),r.a.createElement("div",{className:"container-input"},r.a.createElement("form",{className:"form",onSubmit:E},r.a.createElement("textarea",{className:"textbox",value:h,onChange:function(e){"Enter"!==e.key&&g(e.target.value)},placeholder:"Say something...",onKeyPress:function(e){"Enter"===e.key&&E(e)}}),r.a.createElement("button",{className:"button"},"Send"))))},W="https://kitty-friends-project-4.herokuapp.com/api",$=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={cats:[],errorMessage:null,isAuth:!1,user:null},e.logoutHandler=function(t){t.preventDefault(),console.log("i logged out"),e.setState({items:[],errorMessage:null,isAuth:!1,user:null}),localStorage.removeItem("token")},e.getUserProfile=function(t){g.a.get("".concat(W,"/auth/user"),{headers:{"x-auth-token":t}}).then((function(t){console.log(t.data),e.setState({isAuth:!0,user:t.data.user})})).catch((function(e){}))},e.loginHandler=function(t){g.a.post("".concat(W,"/auth/login"),t).then((function(t){console.log(t.data),localStorage.setItem("token",t.data.token),e.getUserProfile(t.data.token),e.setState({isAuth:!0})})).catch((function(t){console.log(t),e.setState({isAuth:!1,errorMessage:t.response.data.message})}))},e.registerHandler=function(t){g.a.post("".concat(W,"/auth/register"),t).then((function(t){console.log(t.data),localStorage.setItem("token",t.data.token),e.setState({isAuth:!0})})).catch((function(t){e.setState({isAuth:!1})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");null!=e&&(Object(I.decode)(e)?this.getUserProfile(e):localStorage.removeItem("token"))}},{key:"render",value:function(){var e=this;console.log(W);var t=this.state,a=t.isAuth,n=t.user,c=t.errorMessage;return r.a.createElement(m.a,null,r.a.createElement(f,{user:n,logout:this.logoutHandler}),c&&r.a.createElement(R.a,null,c),r.a.createElement(d.d,null,r.a.createElement(L,{exact:!0,path:"/",isAuth:a,component:j}),r.a.createElement(d.b,{path:"/cat/add",exact:!0,render:function(){return r.a.createElement(A,null)}}),r.a.createElement(L,{exact:!0,path:"/cat/:id",isAuth:a,component:U}),r.a.createElement(d.b,{path:"/register",exact:!0,render:function(){return a?r.a.createElement(d.a,{to:"/"}):r.a.createElement(N,{register:e.registerHandler})}}),r.a.createElement(d.b,{path:"/login",exact:!0,render:function(){return a?r.a.createElement(d.a,{to:"/"}):r.a.createElement(x,{login:e.loginHandler})}}),r.a.createElement(d.b,{path:"/chat",exact:!0,render:function(){return r.a.createElement(T,{user:e.state.user})}})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(352);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[189,1,2]]]);
//# sourceMappingURL=main.7f15e999.chunk.js.map